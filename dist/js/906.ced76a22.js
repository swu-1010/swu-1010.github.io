"use strict";(self["webpackChunkbookstore_app"]=self["webpackChunkbookstore_app"]||[]).push([[906],{39906:function(e,r,s){s.r(r),s.d(r,{default:function(){return c}});var t=function(){var e=this,r=e._self._c;return r("div",{staticClass:"login"},[r("div",{staticClass:"content"},[r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,"status-icon":"",rules:e.rules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"用户名",prop:"username"}},[r("el-input",{model:{value:e.ruleForm.username,callback:function(r){e.$set(e.ruleForm,"username",e._n(r))},expression:"ruleForm.username"}})],1),r("el-form-item",{attrs:{label:"密码",prop:"password"}},[r("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.ruleForm.password,callback:function(r){e.$set(e.ruleForm,"password",r)},expression:"ruleForm.password"}})],1),r("el-form-item",{attrs:{label:"确认密码",prop:"checkPass"}},[r("el-input",{attrs:{type:"password",autocomplete:"off"},nativeOn:{keyup:function(r){return!r.type.indexOf("key")&&e._k(r.keyCode,"enter",13,r.key,"Enter")?null:e.submitForm("ruleForm")}},model:{value:e.ruleForm.checkPass,callback:function(r){e.$set(e.ruleForm,"checkPass",r)},expression:"ruleForm.checkPass"}})],1),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(r){return e.submitForm("ruleForm")}}},[e._v("提交")]),r("el-button",{on:{click:function(r){return e.resetForm("ruleForm")}}},[e._v("重置")])],1)],1),r("div",{staticStyle:{"margin-top":"20px"}},[r("router-link",{attrs:{to:"/"}},[e._v("权限不足？点击去浏览前台")])],1)],1)])},o=[],a=(s(16743),s(88848)),l=(s(57658),s(7877)),u={name:"backLogin",data(){var e=(e,r,s)=>{if(!r)return s(new Error("用户名不能为空"));s()},r=(e,r,s)=>{""===r?s(new Error("请输入密码")):(""!==this.ruleForm.checkPass&&this.$refs.ruleForm.validateField("checkPass"),s())},s=(e,r,s)=>{""===r?s(new Error("请再次输入密码")):r!==this.ruleForm.password?s(new Error("两次输入密码不一致!")):s()};return{ruleForm:{password:"",checkPass:"",username:""},rules:{password:[{validator:r,trigger:"blur"}],checkPass:[{validator:s,trigger:"blur"}],username:[{validator:e,trigger:"blur"}]}}},methods:{submitForm(e){this.$refs[e].validate((e=>{if(!e)return(0,a.Z)("error submit!!"),!1;{let e=this;var r={username:this.ruleForm.username,password:this.ruleForm.password};l.Z.login("/user/login",r).then((function(r){console.log(r),200==r.statusCode&&1==r.data.user.privilege?((0,a.Z)("登录成功"),e.$store.commit("setUser",{Authorization:r.data.Authorization,username:r.data.user.username,nickname:r.data.user.nickname}),e.$router.push({path:"/manageUser"})):600==r.statusCode?((0,a.Z)(r.message),"用户名不正确"==r.message?e.ruleForm.username="":"密码错误"==r.message&&(e.ruleForm.password="",e.ruleForm.checkPass="")):0==r.data.user.privilege&&(0,a.Z)("权限不足，请联系管理员")})).catch((function(e){console.log("error:",e)}))}}))},resetForm(e){this.$refs[e].resetFields()}}},n=u,i=s(1001),m=(0,i.Z)(n,t,o,!1,null,"70b91411",null),c=m.exports}}]);
//# sourceMappingURL=906.ced76a22.js.map