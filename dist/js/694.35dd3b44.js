"use strict";(self["webpackChunkbookstore_app"]=self["webpackChunkbookstore_app"]||[]).push([[694],{75694:function(t,o,e){e.r(o),e.d(o,{default:function(){return d}});var s=function(){var t=this,o=t._self._c;return o("div",{staticClass:"comment"},[o("van-nav-bar",{attrs:{"left-text":-1==t.book.status?"发表追评":"发表评价","left-arrow":""},on:{"click-left":t.back},scopedSlots:t._u([{key:"right",fn:function(){return[o("van-button",{attrs:{round:"",type:"info",size:"big"},on:{click:function(o){return t.publish()}}},[t._v(t._s(-1==t.book.status?"发布追评":"发布评价"))])]},proxy:!0}])}),o("div",{staticClass:"content"},[o("div",[o("van-image",{attrs:{width:"50",height:"50",src:t.book.img}}),o("div",{staticStyle:{"font-size":"14px","margin-bottom":"10px"}},[t._v(t._s(t.book.name))]),-1!=t.book.status?o("div",[o("span",{staticStyle:{"margin-right":"20px"}},[t._v("评分")]),o("van-rate",{on:{change:t.onChange},model:{value:t.value,callback:function(o){t.value=o},expression:"value"}})],1):t._e(),o("span",{staticStyle:{"margin-left":"25px"}},[t._v(t._s(t.rate[t.value-1]))])],1),o("div",[o("van-field",{staticStyle:{"border-radius":"16px"},attrs:{rows:"4",autosize:"",label:-1==t.book.status?"追评":"评价",type:"textarea",maxlength:"60",placeholder:"请输入内容","show-word-limit":""},model:{value:t.message,callback:function(o){t.message=o},expression:"message"}})],1)])],1)},a=[],n=(e(16743),e(88848)),r=(e(57658),e(7877)),i={name:"comment",data:function(){return{book:this.$route.query.book,rate:"",value:0,message:"",rate:["非常差","差","一般","好","非常好"]}},methods:{back(){this.$router.push({path:"/order",query:{status:this.book.status}})},onChange(t){this.value=t},publish(){let t=this;4==this.book.status?r.Z.addComment("/comment/add",this.book.bookId,this.value,this.message).then((o=>{console.log(o),r.Z.updateOrderDetail("/orderDetail/update",t.book.orderId,t.book.bookId,t.book.status).then((o=>{console.log(o),(0,n.Z)("评价成功"),t.$router.push({path:"/myComment",query:{book:this.book}})}))})):-1==this.book.status&&r.Z.appendComment("/comment/append",this.book.bookId,this.message).then((o=>{console.log(o),r.Z.updateOrderDetail("/orderDetail/update",t.book.orderId,t.book.bookId,t.book.status).then((o=>{console.log(o),(0,n.Z)("追评成功"),t.$router.push({path:"/myComment",query:{book:this.book}})}))}))}}},u=i,l=e(1001),b=(0,l.Z)(u,s,a,!1,null,"025b799e",null),d=b.exports}}]);
//# sourceMappingURL=694.35dd3b44.js.map