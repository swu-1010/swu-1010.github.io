{"version":3,"file":"js/19.86af7825.js","mappings":"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","sources":["webpack://bookstore_app/./src/components/mobile/Detail.vue","webpack://bookstore_app/src/components/mobile/Detail.vue","webpack://bookstore_app/./src/components/mobile/Detail.vue?3368","webpack://bookstore_app/./src/components/mobile/Detail.vue?7b10"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"detail\"},[_c('van-nav-bar',{attrs:{\"left-arrow\":\"\",\"title\":_vm.details.name},on:{\"click-left\":function($event){return _vm.$router.go(-1)}}}),_c('van-image',{staticClass:\"img\",attrs:{\"src\":'/' + _vm.details.img}}),_c('van-card',{attrs:{\"price\":_vm.details.price,\"desc\":_vm.details.author,\"title\":_vm.details.name},scopedSlots:_vm._u([{key:\"tags\",fn:function(){return [_c('van-tag',{attrs:{\"plain\":\"\",\"size\":\"large\",\"type\":\"primary\"}},[_vm._v(_vm._s(_vm.details.publisher))]),_c('br'),_c('van-tag',{attrs:{\"size\":\"large\",\"type\":\"danger\"}},[_vm._v(_vm._s(_vm.details.etc.cateName))])]},proxy:true},{key:\"num\",fn:function(){return [_c('van-tag',{staticClass:\"tagFavor\",attrs:{\"size\":\"large\"},on:{\"click\":function($event){return _vm.toFavor(_vm.$route.query.id)}}},[(_vm.details.etc.isFavor == 1)?_c('van-icon',{attrs:{\"name\":\"star\"}}):_c('van-icon',{attrs:{\"name\":\"star-o\"}}),_vm._v(\" \"+_vm._s(_vm.favor)+\" \")],1)]},proxy:true}])}),_c('div',{staticStyle:{\"margin-left\":\"20px\",\"color\":\"red\",\"float\":\"left\"}},[_vm._v(\"简介\")]),_c('div',{staticClass:\"bookDetail\",domProps:{\"innerHTML\":_vm._s(_vm.details.description)}}),_c('van-nav-bar',{attrs:{\"left-text\":'书籍评价'+_vm.bookCommentNum},on:{\"click-left\":function($event){return _vm.toComment()},\"click-right\":function($event){return _vm.toComment()}},scopedSlots:_vm._u([{key:\"right\",fn:function(){return [_vm._v(\" 查看全部 \"),_c('van-icon',{attrs:{\"name\":\"arrow\"}})]},proxy:true}])}),_vm._l((_vm.comments),function(comment,index){return _c('div',{key:index,staticClass:\"book\"},[_c('div',{staticStyle:{\"display\":\"flex\"}},[_c('van-image',{staticClass:\"img2\",attrs:{\"round\":\"\",\"src\":\"user.jpg\"}}),_c('div',{staticStyle:{\"margin-left\":\"20px\",\"margin-top\":\"10px\"}},[_vm._v(_vm._s(comment.etc.nickname))])],1),_c('div',[_c('van-rate',{attrs:{\"readonly\":\"\"},model:{value:(comment.rate),callback:function ($$v) {_vm.$set(comment, \"rate\", $$v)},expression:\"comment.rate\"}})],1),_c('div',[_vm._v(_vm._s(comment.content))]),_c('div',{staticStyle:{\"font-size\":\"14px\"}},[_vm._v(_vm._s(comment.createTime))])])}),_c('van-goods-action',[_c('van-goods-action-icon',{attrs:{\"icon\":\"chat-o\",\"text\":\"客服\"}}),_c('van-goods-action-icon',{attrs:{\"icon\":\"cart-o\",\"text\":\"购物车\",\"to\":\"/cart\",\"badge\":_vm.cartNum}}),_c('van-goods-action-icon',{attrs:{\"icon\":\"star-o\",\"text\":\"收藏\",\"to\":\"/favor\",\"badge\":_vm.favorNum}}),_c('van-goods-action-button',{attrs:{\"type\":\"danger\",\"text\":\"加入购物车\"},on:{\"click\":function($event){return _vm.toShopCart(_vm.$route.query.id)}}})],1)],2)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"detail\">\r\n        <van-nav-bar left-arrow @click-left=$router.go(-1) :title=\"details.name\" />\r\n        <van-image :src=\"'/' + details.img\" class=\"img\"></van-image>\r\n        <van-card :price=\"details.price\" :desc=\"details.author\" :title=\"details.name\">\r\n            <template #tags>\r\n                <van-tag plain size=\"large\" type=\"primary\">{{ details.publisher }}</van-tag>\r\n                <br>\r\n                <!-- $route.params.name[details.category-1] -->\r\n                <van-tag size=\"large\" type=\"danger\">{{ details.etc.cateName }}</van-tag>\r\n            </template>\r\n            <template #num>\r\n                <van-tag size=\"large\" class=\"tagFavor\" @click=\"toFavor($route.query.id)\"> \r\n                    <van-icon name=\"star\" v-if=\"details.etc.isFavor == 1\" />\r\n                    <van-icon name=\"star-o\" v-else />\r\n                    {{ favor }}\r\n                </van-tag>\r\n            </template>\r\n        </van-card>\r\n        <div style=\"margin-left:20px;color: red;float:left\">简介</div>\r\n        <div class=\"bookDetail\" v-html=\"details.description\"></div>\r\n        <van-nav-bar :left-text=\"'书籍评价'+bookCommentNum\" @click-left=\"toComment()\" @click-right=\"toComment()\">\r\n            <template #right>\r\n                查看全部\r\n                <van-icon name=\"arrow\" />\r\n            </template>\r\n        </van-nav-bar>\r\n        <div v-for=\"comment, index in comments\" :key=\"index\" class=\"book\">\r\n            <div style=\"display:flex\"><van-image round class=\"img2\" src=\"user.jpg\"/>\r\n                <div style=\"margin-left: 20px;margin-top: 10px;\">{{comment.etc.nickname}}</div>\r\n            </div>\r\n            <div><van-rate v-model=\"comment.rate\" readonly /></div>\r\n            <div>{{ comment.content }}</div>\r\n            <div style=\"font-size:14px\">{{comment.createTime}}</div>\r\n        </div>\r\n        <van-goods-action>\r\n            <van-goods-action-icon icon=\"chat-o\" text=\"客服\" />\r\n            <van-goods-action-icon icon=\"cart-o\" text=\"购物车\" to=\"/cart\" :badge=\"cartNum\" />\r\n            <van-goods-action-icon icon=\"star-o\" text=\"收藏\" to=\"/favor\" :badge=\"favorNum\" />\r\n            <van-goods-action-button type=\"danger\" text=\"加入购物车\" @click=\"toShopCart($route.query.id)\" />\r\n        </van-goods-action>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport api from '@/api'\r\nimport { Toast } from 'vant';\r\nimport { Dialog } from 'vant';\r\n\r\nexport default {\r\n    name: 'datail',\r\n    data: function () {\r\n        return {\r\n            details: [],\r\n            comments: [],\r\n        }\r\n    },\r\n    methods: {\r\n        toShopCart(id) {\r\n            // this.$store.commit('addCart', id);\r\n            let self = this\r\n            const token = localStorage.getItem('Authorization');\r\n            if (!token) {\r\n                Dialog.confirm({\r\n                    message: '尚未登录，需要登录',\r\n                    confirmButtonText: '前往登录',\r\n                    cancelButtonText: '留在当前页'\r\n                })\r\n                    .then(() => {\r\n                        // on confirm\r\n                        self.$router.replace('/login')\r\n                        Toast(\"请登录\")\r\n                    })\r\n                    .catch(() => {\r\n                        // on cancel\r\n                    });\r\n            }\r\n            else {\r\n                api.add(\"/cart/addById\", id)\r\n                    .then(res => {\r\n                        console.log(res.data);\r\n                        Toast(\"添加成功\");\r\n                        self.$store.dispatch('setCartNum');\r\n                    })\r\n            }\r\n        },\r\n        toFavor(id) {\r\n            const token = localStorage.getItem('Authorization');\r\n            let self = this;\r\n            if (!token) {\r\n                Dialog.confirm({\r\n                    message: '尚未登录，需要登录',\r\n                    confirmButtonText: '前往登录',\r\n                    cancelButtonText: '留在当前页'\r\n                })\r\n                    .then(() => {\r\n                        // on confirm\r\n                        self.$router.replace('/login')\r\n                        Toast(\"请登录\")\r\n                    })\r\n                    .catch(() => {\r\n                        // on cancel\r\n                    });\r\n                // self.$router.replace('/login');\r\n                // Toast(\"请登录\");\r\n            }\r\n            else {\r\n                api.add(\"/favor/addById\", id)\r\n                    .then(res => {\r\n                        // console.log(res.data);\r\n                        if (res.statusCode == 500) {//已收藏，取消收藏\r\n                            api.deleteByIds(\"/favor/deleteByIds\", id)\r\n                                .then(res2 => {\r\n                                    // console.log(res2.data);\r\n                                    Toast(\"取消收藏成功\");\r\n                                    self.$store.dispatch('setFavorNum');\r\n                                    self.details.etc.isFavor = 0\r\n                                })\r\n                        }\r\n                        else if (res.statusCode == 200) {\r\n                            Toast(\"收藏成功\");\r\n                            self.$store.dispatch('setFavorNum');\r\n                            self.details.etc.isFavor = 1\r\n                        }\r\n                    })\r\n            }\r\n        },\r\n        toComment() {\r\n            this.$router.push({path: '/bookComment', query: {bookId: this.details.id}});\r\n        },\r\n    },\r\n    mounted: function () {\r\n        let self = this;\r\n        let id = this.$route.query.id\r\n        api.getBookById(\"/book/getBookById\", id)\r\n            .then(res => {\r\n                self.details = res.data;\r\n                // console.log(self.details.etc.cateName);\r\n                api.getCommentByBookId(\"/comment/getByBookId\", id)\r\n                .then(res2 => {\r\n                    console.log(res2)    \r\n                    self.$store.dispatch('setCartNum')\r\n                    self.$store.dispatch('setFavorNum')                \r\n                    if (res2.statusCode == 200) {\r\n                        self.comments = res2.data.slice(0, 3)\r\n                        self.$store.commit('setbookCommentNum', res2.data.length);\r\n                    }\r\n                    else\r\n                        self.$store.commit('setbookCommentNum', 0);\r\n                })\r\n            })\r\n    },\r\n    computed: {\r\n        cartNum: function () {\r\n            let n = this.$store.getters.getCartNum;\r\n            return n > 0 ? n : '';\r\n        },\r\n        favorNum: function () {\r\n            let n = this.$store.getters.getFavorNum;\r\n            return n > 0 ? n : '';\r\n        },\r\n        bookCommentNum: function () {\r\n            let n = this.$store.getters.getbookCommentNum;\r\n            return n > 0 ? \"(\" + n + \")\" : \"(0)\";\r\n        },\r\n        favor: function(){\r\n            return this.details.etc.isFavor == 0 ? \"收藏书籍\" : \"取消收藏\"\r\n        }\r\n    }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.van-nav-bar .van-icon,\r\n.van-nav-bar__text {\r\n    color: #1989fa;\r\n}\r\n.van-card__price {\r\n    font-size: 16px;\r\n}\r\n.bookDetail {\r\n    margin: 20px;\r\n    height: auto;\r\n    /* padding-bottom: 50px; */\r\n    white-space: pre-wrap;\r\n    text-align: center;\r\n}\r\n\r\n.tagFavor {\r\n    bottom: 170px;\r\n    background-color: #ee0a24;\r\n}\r\n\r\n.van-tag--large {\r\n    margin-bottom: 5px;\r\n}\r\n\r\n.van-card__title {\r\n    font-size: large;\r\n    line-height: 25px;\r\n    max-height: 50px;\r\n    margin-bottom: 5px;\r\n}\r\n\r\n.van-card__desc {\r\n    font-size: large;\r\n    margin-bottom: 5px;\r\n}\r\n\r\n.detail {\r\n    background-color: white;\r\n    padding-bottom: 50px;\r\n}\r\n\r\n.van-card {\r\n    text-align: left;\r\n}\r\n.comment {\r\n    text-align: left;\r\n    padding: 10px;\r\n}\r\n.book {\r\n    text-align: left;\r\n    padding: 15px;\r\n    \r\n}\r\n.book div {\r\n    margin-bottom: 10px;\r\n}\r\n.img {\r\n    width:220px;\r\n    height:220px;\r\n}\r\n.img2 {\r\n    width:40px;\r\n    height:40px;\r\n}\r\n.van-nav-bar {\r\n    z-index: 0;\r\n}\r\ntable {\r\n    border-spacing: 15px;\r\n}\r\n</style>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Detail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Detail.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Detail.vue?vue&type=template&id=5297d68e&scoped=true&\"\nimport script from \"./Detail.vue?vue&type=script&lang=js&\"\nexport * from \"./Detail.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Detail.vue?vue&type=style&index=0&id=5297d68e&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5297d68e\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","attrs","details","name","on","$event","$router","go","img","price","author","scopedSlots","_u","key","fn","_v","_s","publisher","etc","cateName","proxy","toFavor","$route","query","id","isFavor","favor","staticStyle","domProps","description","bookCommentNum","toComment","_l","comments","comment","index","nickname","model","value","rate","callback","$$v","$set","expression","content","createTime","cartNum","favorNum","toShopCart","staticRenderFns","data","methods","api","then","console","self","message","confirmButtonText","cancelButtonText","catch","path","bookId","mounted","computed","component"],"sourceRoot":""}